webpackJsonp([1],{"1gtF":function(e,t){e.exports={header:"UserPage__header___3uw3C"}},"4wrL":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r("GiK3"),a=n(o),l=r("KSGD"),i=(n(l),r("RH2O")),s=r("xPIz"),c=r("5qlQ"),f=r("zJE9"),d=n(f),E=s.Select.Option,p=a.default.createElement(E,{value:"root",disabled:!0},"Root"),m=a.default.createElement(E,{value:"admin"},"Admin"),_=a.default.createElement(E,{value:"user"},"User"),R=function(e){var t=e.user,r=e.loading,n=e.disabled,o=e.onSetRole,l=t.role;return a.default.createElement(s.Select,{className:d.default.select,value:l,disabled:n||r,onChange:function(e){return o(u({},t,{role:e}))}},p,m,_)},S=function(e,t){var r=t.user;return{loading:(0,c.userLoadingSel)(e,r.userId)}},y=function(e){return{onSetRole:function(t){return e((0,c.editUserRequest)(t))}}};t.default=(0,i.connect)(S,y)(R)},"5qlQ":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.epics=t.userLoadingSel=t.userLoadingAllSel=t.usersSel=t.usersLoadingSel=t.deleteUserError=t.deleteUserResponse=t.deleteUserRequest=t.DELETE_USER_ERROR=t.DELETE_USER_RESPONSE=t.DELETE_USER_REQUEST=t.editUserError=t.editUserResponse=t.editUserRequest=t.EDIT_USER_ERROR=t.EDIT_USER_RESPONSE=t.EDIT_USER_REQUEST=t.getUsersError=t.getUsersResponse=t.getUsersRequest=t.GET_USERS_ERROR=t.GET_USERS_RESPONSE=t.GET_USERS_REQUEST=t.ROUTE_USERS=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r("2KeS"),l=r("N+5n"),i=r("rCTf");r("1APj"),r("6Yye"),r("94IA"),r("+pb+"),r("uCY4");var s=r("/Fjh");r("cPC/");var c=r("wf2E"),f=r("f88J"),d=(t.ROUTE_USERS=f.moduleName+"/ROUTE_USERS",t.GET_USERS_REQUEST=f.moduleName+"/GET_USERS_REQUEST"),E=t.GET_USERS_RESPONSE=f.moduleName+"/GET_USERS_RESPONSE",p=t.GET_USERS_ERROR=f.moduleName+"/GET_USERS_ERROR",m=(t.getUsersRequest=function(){return{type:d}},t.getUsersResponse=function(e){return{type:E,payload:e}}),_=t.getUsersError=function(e){return{type:p,payload:e}},R=t.EDIT_USER_REQUEST=f.moduleName+"/EDIT_USER_REQUEST",S=t.EDIT_USER_RESPONSE=f.moduleName+"/EDIT_USER_RESPONSE",y=t.EDIT_USER_ERROR=f.moduleName+"/EDIT_USER_ERROR",b=(t.editUserRequest=function(e){return{type:R,payload:e}},t.editUserResponse=function(e){return{type:S,payload:e}}),v=t.editUserError=function(e,t){return{type:y,payload:{email:e,err:t}}},g=t.DELETE_USER_REQUEST=f.moduleName+"/DELETE_USER_REQUEST",U=t.DELETE_USER_RESPONSE=f.moduleName+"/DELETE_USER_RESPONSE",h=t.DELETE_USER_ERROR=f.moduleName+"/DELETE_USER_ERROR",O=(t.deleteUserRequest=function(e,t){return{type:g,payload:{userId:e,email:t}}},t.deleteUserResponse=function(e,t){return{type:U,payload:{userId:e,email:t}}}),P=t.deleteUserError=function(e,t,r){return{type:h,payload:{userId:e,email:t,err:r}}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case d:return!0;case E:case p:return!1;default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=t.type,n=t.payload;switch(r){case E:return n;case S:return e.find(function(e){return e.userId===n.userId})?e.map(function(e){return e.userId===n.userId?n:e}):[].concat(u(e),[n]);case U:return e.filter(function(e){return e.userId!==n.userId});default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=t.type,u=t.payload;switch(r){case R:case g:return o({},e,n({},u.email,!0));case S:case y:case U:case h:return o({},e,n({},u.email,!1));default:return e}},j=(0,a.combineReducers)({usersLoading:T,users:I,userLoading:w});t.default=(0,c.resetOnLogoutReducer)(j);var N=function(e){return e[f.moduleName]},D=(t.usersLoadingSel=function(e){return N(e).usersLoading},t.usersSel=function(e){return N(e).users},t.userLoadingAllSel=function(e){return N(e).userLoading}),L=(t.userLoadingSel=function(e,t){return D(e)[t]||!1},function(e){return e.ofType(d).switchMap(function(){return G().map(m).apiCatch(function(e){return i.Observable.of(_(e))})})}),M=function(e){return e.ofType(R).switchMap(function(e){var t=e.payload;return(null==t.userId?x(t):q(t)).map(b).do(function(){return null==t.userId?(0,s.toast)("User added"):(0,s.toast)("User updated")}).apiCatch(function(e){return i.Observable.of(v(t.email,e))})})},A=function(e){return e.ofType(g).switchMap(function(e){var t=e.payload;return F(t.userId).map(function(){return O(t.userId)}).do(function(){return(0,s.toast)("User deleted")}).apiCatch(function(e){return i.Observable.of(P(t.userId,t.email,e))})})},G=(t.epics=(0,l.combineEpics)(L,M,A),function(){return c.apiService.get$("/users")}),x=function(e){return c.apiService.post$("/users",e)},q=function(e){return c.apiService.put$("/users/"+e.userId,e)},F=function(e){return c.apiService.delete$("/users/"+e)}},AIcO:function(e,t){e.exports={form:"NewUserForm__form___1JzSj",roleSelect:"NewUserForm__roleSelect___3oVyh",buttonItem:"NewUserForm__buttonItem___3KExu"}},DGUP:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("GiK3"),o=n(u),a=r("xPIz"),l=r("Jn7R"),i=n(l),s=r("1gtF"),c=n(s),f=o.default.createElement(a.PageTitle,null,"Users"),d=o.default.createElement(a.H,{size:"1"},"User whitelist"),E=o.default.createElement(i.default,null),p=function(){return o.default.createElement(o.default.Fragment,null,f,o.default.createElement("div",{className:c.default.header},d),E)};t.default=p},Jn7R:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("ivA9");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(u).default}})},MyDh:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(u,o){try{var a=t[u](o),l=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r("GiK3"),c=n(s),f=r("KSGD"),d=(n(f),r("RH2O")),E=r("Md7J"),p=n(E),m=r("xPIz"),_=r("5qlQ"),R=r("AIcO"),S=n(R),y=m.Form.Item,b=m.Select.Option,v=c.default.createElement(m.Input,{addonAfter:"@gmail.com"}),g=c.default.createElement(b,{value:"root",disabled:!0},"Root"),U=c.default.createElement(b,{value:"admin"},"Admin"),h=c.default.createElement(b,{value:"user"},"User"),O=c.default.createElement(p.default,null),P=function(e){function t(){var e,r,n,l,i=this;o(this,t);for(var s=arguments.length,c=Array(s),f=0;f<s;f++)c[f]=arguments[f];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.componentWillReceiveProps=function(e){var t=e.allUsersLoading,r=n.props.form,u=t[n.getEmailWithSuffix(r.getFieldValue("email"))];n.getLoading()!==u&&r.resetFields()},n.getLoading=function(){var e=n.props,t=e.form;return e.allUsersLoading[n.getEmailWithSuffix(t.getFieldValue("email"))]},n.getEmailWithSuffix=function(e){return e+"@gmail.com"},n.handleSubmit=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.validateForm();case 3:r=e.sent,u=r.email,o=r.role,n.props.onAdd({email:n.getEmailWithSuffix(u),role:o});case 7:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.validateForm=function(){return new Promise(function(e,t){n.props.form.validateFields(function(r,n){return r?t(r):e(n)})})},l=r,a(n,l)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,r=this.getLoading();return c.default.createElement(m.Form,{layout:"inline",className:S.default.form,onSubmit:this.handleSubmit},c.default.createElement(y,{label:"Email"},t("email",{rules:[{required:!0,message:"This field is required"}]})(v)),c.default.createElement(y,{label:"Role"},t("role",{rules:[{required:!0,message:"This field is required"}]})(c.default.createElement(m.Select,{className:S.default.roleSelect},g,U,h))),c.default.createElement(y,{className:S.default.buttonItem},c.default.createElement(m.Button,{ghost:!0,htmlType:"submit",loading:r,onClick:this.handleSubmit},O," ","Add")))}}]),t}(c.default.Component),T=function(e){return{allUsersLoading:(0,_.userLoadingAllSel)(e)}},I=function(e){return{onAdd:function(t){return e((0,_.editUserRequest)(t))}}};t.default=(0,d.connect)(T,I)(m.Form.create()(P))},YE5u:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("DGUP");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(u).default}})},f88J:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.moduleName="users"},fes6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("GiK3"),u=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r("5qlQ"),a=r("kaBE"),l=u.default.createElement(a.UsersPage,null),i=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},o.ROUTE_USERS,{path:"/users",component:function(){return l},roles:["root"]});t.default=i},ivA9:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r("GiK3"),s=n(i),c=r("KSGD"),f=(n(c),r("RH2O")),d=r("xPIz"),E=r("0waI"),p=r("5qlQ"),m=r("MyDh"),_=n(m),R=r("4wrL"),S=n(R),y=r("w0n0"),b=n(y),v=r("n6zQ"),g=n(v),U=s.default.createElement(_.default,null),h=function(e){function t(){var e,r,n,a;u(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return r=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.getColumns=function(){var e=n.props.currentUserId;return[{dataIndex:"email",title:"Email",render:function(e){return e}},{width:"11rem",title:"Role",render:function(t,r){return s.default.createElement(S.default,{user:r,disabled:e===r.userId})}},{width:"8rem",className:g.default.rightAlign,render:function(t,r){var n=r.userId,u=r.email;return s.default.createElement(b.default,{userId:n,email:u,disabled:e===n})}}]},a=r,o(n,a)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.onGetUsers()}},{key:"render",value:function(){var e=this.props,t=e.loading,r=e.users;return s.default.createElement(s.default.Fragment,null,U,s.default.createElement(d.Table,{className:g.default.table,rowKey:"userId",size:"middle",columns:this.getColumns(),dataSource:r,loading:t,pagination:!1}))}}]),t}(s.default.Component),O=function(e){return{currentUserId:(0,E.userSel)(e).userId,loading:(0,p.usersLoadingSel)(e),users:(0,p.usersSel)(e)}},P=function(e){return{onGetUsers:function(){return e((0,p.getUsersRequest)())}}};t.default=(0,f.connect)(O,P)(h)},kaBE:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("YE5u");Object.defineProperty(t,"UsersPage",{enumerable:!0,get:function(){return n(u).default}})},n6zQ:function(e,t){e.exports={table:"AllUsers__table___3Zyf_",operations:"AllUsers__operations___3Gs1T",rightAlign:"AllUsers__rightAlign___2vW-w"}},odyk:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("f88J");Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return u.moduleName}});var o=r("fes6");Object.defineProperty(t,"routes",{enumerable:!0,get:function(){return n(o).default}});var a=r("kaBE");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var l=r("5qlQ");Object.defineProperty(t,"reducers",{enumerable:!0,get:function(){return n(l).default}}),Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})})},w0n0:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("GiK3"),o=n(u),a=r("KSGD"),l=(n(a),r("RH2O")),i=r("WAHX"),s=n(i),c=r("xPIz"),f=r("5qlQ"),d=o.default.createElement(s.default,null),E=function(e){var t=e.loading,r=e.disabled,n=e.onDelete;return o.default.createElement(c.Popconfirm,{title:"Are you sure?",okText:"Yes",cancelText:"No",onConfirm:n},o.default.createElement(c.IconButton,{type:"danger",title:"Delete",loading:t,disabled:r||t},d))},p=function(e,t){var r=t.email;return{loading:(0,f.userLoadingSel)(e,r)}},m=function(e,t){var r=t.userId,n=t.email;return{onDelete:function(){return e((0,f.deleteUserRequest)(r,n))}}};t.default=(0,l.connect)(p,m)(E)},zJE9:function(e,t){e.exports={select:"RoleSelect__select___200kD"}}});
//# sourceMappingURL=1.6f903d7ac10bd7b2b098.js.map